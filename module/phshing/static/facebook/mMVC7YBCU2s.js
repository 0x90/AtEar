/*!CK:235140444!*//*1438123868,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["oClnR"]); }

__d("MTabbable",["MAria","MJSEnvironment","MViewport","isNodeWithinRect"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(n,o){while(n&&n!==o){if(g.isHidden(n))return true;n=n.parentNode;}return false;}function l(n,o){if(n.offsetHeight===0||n.offsetWidth===0||window.getComputedStyle(n).visibility==='hidden'||parseInt(n.tabIndex,10)<0||k(n,o))return false;if(n.tabIndex>=0)return true;switch(n.tagName){case 'A':return n.href&&n.rel!='ignore';case 'INPUT':return n.type!='hidden'&&n.type!='file'&&!n.disabled;case 'BUTTON':case 'SELECT':case 'TEXTAREA':return !n.disabled;}return false;}function m(n){if(!n.getBoundingClientRect)return;var o=((h.IS_APPLE_WEBKIT_IOS&&parseFloat(h.OS_VERSION)>=8)||(h.BROWSER_NAME==='Safari'&&!h.IS_APPLE_WEBKIT_IOS)),p=o?n.querySelectorAll('a, button, select, [tabindex]'):n.querySelectorAll('a, button, input, select, textarea, [tabindex]'),q=i.getBoundingRect();for(var r=0,s;s=p[r];r++)if(l(s,n)&&j(s,q)){s.focus();return;}}f.focusTabbable=m;},null);
__d("Popover",["setTimeoutAcrossTransitions","CSS","DOM","MAria","MViewport","Stratcom","Vector","$","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=40;function q(r){"use strict";var s=r.flyout;this.flyout=(typeof s=='string')?n(s):s;this.content=i.scry(this.flyout,'div','flyout-content')[0];this.options=r;this._onOrientationChange=this._reposition.bind(this);h.conditionClass(this.flyout,'popover_flyout',true);var t=r.button;if(t){this.button=(typeof t=='string')?n(t):t;this.buttonClickListener=i.listen(this.button,'click',null,this._openHandler.bind(this));this.button.setAttribute('role','button');j.setupPopup(this.button,this.flyout);}var u=r.flyoutAnchor;if(u){this.flyoutAnchor=(typeof u=='string')?n(u):u;}else this.flyoutAnchor=this.button;if(this.options.flyoutFromRoot)this.flyoutClickListener=i.listen(this.flyout,'click',null,this._openHandler.bind(this));if(this.options.touchstart_callback)this.flyoutTouchStartListener=i.listen(this.flyout,'touchstart',null,this._touchStartHandler.bind(this));if(this.options.touchmove_callback)this.flyoutTouchMoveListener=i.listen(this.flyout,'touchmove',null,this._touchMoveHandler.bind(this));if(this.options.touchend_callback)this.flyoutTouchEndListener=i.listen(this.flyout,'touchend',null,this._touchEndHandler.bind(this));q._instances[this.flyout.id]=this;}q.prototype.isOpen=function(){"use strict";return !!this._isOpen;};q.prototype.open=function(){"use strict";if(this.isOpen())return;if(q._activePopover)q._activePopover.close();q._activePopover=this;this._isOpen=true;this.constraint=null;h.conditionClass(this.flyout,'popover_hidden',false);if(this.options.flyoutFromRoot)this._absolutePositionFlyout();this._position();if(!this.options.heightConstraint){h.conditionClass(document.body,'disableClicks',true);this.globalListener=l.listenCapture('click',null,this._closeHandler.bind(this));}window.addEventListener('orientationchange',this._onOrientationChange,false);j.showPopup(this.button,this.flyout);if(this.options.ensureVisible){var r=k.getScrollTop(),s=this._getElementPosition(this.flyout).y,t=s+this.flyout.offsetHeight,u=t-(r+k.getUseableHeight());if(u>0){var v=Math.min(u,Math.max(s-r-p,0));k.scrollTo(0,r+v);}}this.invoke('open');};q.prototype.close=function(r){"use strict";if(!this.isOpen())return;q._activePopover=null;this._isOpen=false;h.conditionClass(this.flyout,'popover_hidden',true);if(this.options.flyoutFromRoot){this.flyoutParent.appendChild(this.flyout);delete this.flyoutParent;}g(function(){h.conditionClass(document.body,'disableClicks',false);}.bind(this),400);this.globalListener&&this.globalListener.remove();window.removeEventListener('orientationchange',this._onOrientationChange,false);this._releaseConstraint();j.hidePopup(this.button,this.flyout);if(!r)this.invoke('close');};q.prototype.clear=function(){"use strict";this.globalListener&&this.globalListener.remove();this.buttonClickListener&&this.buttonClickListener.remove();this.flyoutClickListener&&this.flyoutClickListener.remove();this.flyoutTouchStartListener&&this.flyoutTouchStartListener.remove();this.flyoutTouchMoveListener&&this.flyoutTouchMoveListener.remove();this.flyoutTouchEndListener&&this.flyoutTouchEndListener.remove();delete q._instances[this.flyout.id];};q.prototype.refreshConstraints=function(){"use strict";if(!this._isOpen)return false;var r=this.flyout;this._releaseConstraint();if(this.options.heightConstraint){r.style.minHeight=k.getUseableHeight()+'px';this.constraint=k.addHeightConstraint(m.getDim(this.content).y+this._getElementPosition(r).y);}else this.constraint=k.addMinHeightConstraint(m.getDim(r).y+this._getElementPosition(r).y+q._MARGIN);};q.prototype._getTouchPoint=function(event){"use strict";var r=event.getRawEvent().targetTouches[0],s={x:r?r.screenX:0,y:r?r.screenY:0};return s;};q.prototype._touchStartHandler=function(event){"use strict";this.options.touchstart_callback(this._getTouchPoint(event));};q.prototype._touchMoveHandler=function(event){"use strict";if(this.isOpen())this.options.touchmove_callback(this._getTouchPoint(event));};q.prototype._touchEndHandler=function(event){"use strict";this.options.touchend_callback(this._getTouchPoint(event));};q.prototype._openHandler=function(event){"use strict";event.prevent();var r=this.isOpen();if(r&&!this.options.preventClose){this.close();}else if(!r){var s=i.scry(document,'input');for(var t=0;t<s.length;t++)s[t].blur();this.open();}};q.prototype._closeHandler=function(event){"use strict";if(!event.getNode('popover'))this.close();};q.prototype._getElementPosition=function(r){"use strict";var s=r.offsetLeft,t=r.offsetTop;r=r.offsetParent;while(r&&r!==document.documentElement){s+=r.offsetLeft;t+=r.offsetTop;var u=window.getComputedStyle(r);s+=parseInt(u.getPropertyValue('border-left-width').slice(0,-2),10);t+=parseInt(u.getPropertyValue('border-top-width').slice(0,-2),10);r=r.offsetParent;}return new m(s,t);};q.prototype._absolutePositionFlyout=function(){"use strict";this.flyoutParent=this.flyout.parentNode;n('root').appendChild(this.flyout);var r=this._getElementPosition(this.flyout.parentNode),s=this._getElementPosition(this.flyoutAnchor),t=m.getDim(this.flyoutAnchor),u=s.y-r.y+t.y;this.flyout.style.position='absolute';this.flyout.style.top=u+'px';};q.prototype._position=function(){"use strict";var r=this.flyout;if(this.flyoutAnchor&&this.options.positionNub){var s=this._getElementPosition(this.flyoutAnchor),t=i.find(this.flyout,'*','nub'),u=m.getDim(t).x,v=m.getDim(this.flyoutAnchor).x,w=this._getElementPosition(r);(new m(s.x-w.x+(v-u)/2,0)).setPos(t);}this.refreshConstraints();};q.prototype._reposition=function(){"use strict";g(this._position.bind(this),0);};q.prototype._releaseConstraint=function(){"use strict";if(this.constraint){this.constraint.release();this.constraint=null;}};q.getInstance=function(r){"use strict";return q._instances[r];};q.clearAll=function(){"use strict";for(var r=0;r<q._instances.length;r++)q._instances[r].clear();};o(q,['open','close']);Object.assign(q,{_activePopover:null,_MARGIN:40,_instances:{}});e.exports=q;},null);
__d("MJewel",["setTimeoutAcrossTransitions","CSS","DOM","MHistory","MJSEnvironment","MLogState","MTabbable","MViewport","Popover","Stratcom","$","eventsMixinDeprecated"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();var s=10;function t(u,v,w){"use strict";this._sigil=u;this._marauderModuleName=w;this.options=v||{};this._jewelNode=q(t.JEWEL_NAV_NODE_ID);this._softState=v.softState||'jewel='+(t.nextID++);this._duringInit=false;this._previousScrollingPoint=null;this._createPopover();p.listen('m:history:change',null,function(event){if(event.getData().soft===this._softState){this._popover&&this._popover.open();}else this._popover&&this._popover.close();}.bind(this));}t.prototype.isInitialized=function(){"use strict";var u=this.options.contentsSigil||'contents';return !!i.scry(this._jewelNode,'*',u)[0];};t.prototype._getJewelElement=function(){"use strict";return i.find(this._jewelNode,'div',this._sigil);};t.prototype._getCountElement=function(){"use strict";return i.find(this._getJewelElement(),'span','count');};t.prototype._getContentsElement=function(){"use strict";var u=this.options.contentsSigil||'contents';return i.find(this._getJewelElement(),'*',u);};t.prototype._getFlyoutElement=function(){"use strict";return i.find(this._getJewelElement(),'*','flyout');};t.prototype.getCount=function(){"use strict";return this._count;};t.prototype.setDuringInit=function(u){"use strict";this._duringInit=u;};t.prototype._updateCountElement=function(){"use strict";var u=this._getJewelCount();i.setContent(this._getCountElement(),''+u);var v=this._getJewelElement(),w=this._count>0;h.conditionClass(v,'noCount',!w);h.conditionClass(v,'hasCount',w);if(!this._duringInit&&this.options.mJewelMarauderLogger)this._logMarauderEvent('updated');};t.prototype.setCount=function(u){"use strict";if(u<0)return;this._count=u;this._updateCountElement();};t.prototype.setHeaderText=function(u,v){"use strict";if(!u||!v)return;var w=this._getFlyoutElement();if(!w)return;var x=i.find(w,'*',u);if(!x)return;var y=x.cloneNode(true);y.innerText=v;i.replace(x,y);};t.prototype.handleViewedContent=function(){"use strict";if(this.getCount()>0&&this.isInitialized()){this.setCount(0);this.invoke('cleared');}else this.invoke('jewel_click');};t.prototype.setMenuContent=function(u){"use strict";i.setContent(this._getFlyoutElement(),u);if(this.isOpen())this.handleViewedContent();};t.prototype.prependMenuContent=function(u){"use strict";i.prependContent(this._getContentsElement(),u);};t.prototype.removeMenuContent=function(u){"use strict";var v=document.getElementById(u);if(v)i.remove(v);};t.prototype.updateMenuColor=function(u,v,w){"use strict";w?g(this._updateMenuColor.bind(this,u,v),t.MARK_READ_DELAY):this._updateMenuColor(u,v);};t.prototype._updateMenuColor=function(u,v){"use strict";var w=document.getElementById(u);if(w){h.conditionClass(w,t.M_AREA_LIGHTBLUE,!v);h.conditionClass(w,t.M_AREA_WHITE,v);}};t.prototype._createPopover=function(){"use strict";var u=this._getJewelElement(),v=i.find(u,'div','flyout');this._popover=new o({button:i.find(u,'*','icon'),flyout:v,ensureVisible:false,touchstart_callback:(this.options.mJewelMarauderLogger?this._onTouchStart.bind(this):null),touchmove_callback:(this.options.mJewelMarauderLogger?this._onTouchMove.bind(this):null),touchend_callback:(this.options.mJewelMarauderLogger?this._onTouchEnd.bind(this):null),heightConstraint:true,preventClose:true});this._onOpenListener=this._popover.listen('open',this._onOpen.bind(this));this._onCloseListener=this._popover.listen('close',this._onClose.bind(this));this._popoverClickListener=i.listen(v,'click',null,this._onPopoverClick.bind(this));if(k.IS_ANDROID&&k.GET_OS_VERSION>=4)this._scrollAreaNode=i.scry(v,'div','scroll-area')[0];};t.prototype.clear=function(){"use strict";this._onOpenListener&&this._onOpenListener.remove();this._onCloseListener&&this._onCloseListener.remove();this._popoverClickListener&&this._popoverClickListener.remove();this._popoverTouchStartListener&&this._popoverTouchStartListener.remove();this._touchMoveListener&&this._touchMoveListener.remove();this._touchStartListener&&this._touchStartListener.remove();this._popover&&this._popover.clear();};t.prototype._onPopoverClick=function(event){"use strict";l.updateLink(event,this.options.pos);this.options.clickCallback&&this.options.clickCallback(event);if(this.options.mJewelMarauderLogger)this._logMarauderEvent('clicked',event);};t.prototype._onPopoverTouchStart=function(event){"use strict";event.kill();};t.prototype._getJewelCount=function(){"use strict";if(this._count>0){return this._count;}else return this._unreadCount;};t.prototype._onOpen=function(){"use strict";if(this._scrollAreaNode){n.scrollToHeader();var u=document.documentElement;h.conditionClass(u,'hide-scroll',true);this._scrollAreaNode.style.maxHeight=u.offsetHeight-200+'px';}var v=this._getJewelCount();j.pushSoftState(this._softState);this.handleViewedContent();if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,true,{jewel_count:v});p.invoke('m:jewel:flyout:open',null,{jewel:this._sigil});h.conditionClass(this._getJewelElement(),'popoverOpen',true);var w=i.find(this._getJewelElement(),'div','flyout');m.focusTabbable(w);};t.prototype._onClose=function(){"use strict";if(this._scrollAreaNode){this._scrollAreaNode.style.minHeight='';h.conditionClass(document.documentElement,'hide-scroll',false);}p.invoke('m:jewel:flyout:close');h.conditionClass(this._getJewelElement(),'popoverOpen',false);if(this.options.mJewelMarauderLogger)this.options.mJewelMarauderLogger.toggleModule(this._marauderModuleName,false);j.popSoftState(this._softState);};t.prototype._onTouchStart=function(u){"use strict";this._previousScrollingPoint=u;};t.prototype._onTouchMove=function(u){"use strict";if(!this._previousScrollingPoint)return;var v=u.x-this._previousScrollingPoint.x,w=u.y-this._previousScrollingPoint.y,x=Math.sqrt(Math.abs(v)+Math.abs(w));if(x>=s){this._previousScrollingPoint=u;this._logMarauderEvent('scroll',{x:v,y:w});}};t.prototype._onTouchEnd=function(u){"use strict";this._previousScrollingPoint=null;};t.prototype._logMarauderEvent=function(u,v){"use strict";this.options.mJewelMarauderLogger.log(this._marauderModuleName,u,v);};t.prototype.isOpen=function(){"use strict";return this._popover&&this._popover.isOpen();};t.prototype.openPopover=function(){"use strict";this._popover&&!this._popover.isOpen()&&this._popover.open();};t.prototype.reregisterListeners=function(){"use strict";var u=this.isOpen();this.clear();this._createPopover();if(u)this._popover.open();};r(t,['cleared','jewel_click']);Object.assign(t,{M_AREA_WHITE:'acw',M_AREA_LIGHTBLUE:'aclb',MARK_READ_DELAY:3000,JEWEL_NAV_NODE_ID:'mJewelNav',nextID:0});Object.assign(t.prototype,{_sigil:null,_currentJewel:null,_count:0,_popover:null});e.exports=t;},null);
__d("MJewels",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={REQUESTS:'requests',MESSAGES:'messages',NOTIFICATIONS:'notifications',SEARCH:'search',MORE:'more',NEWS_FEED:'news-feed',BOOKMARKS:'bookmarks'};},null);
__d("MPlaces",["$","DOM","DataStore","LoadingIndicator","MRequest","Stratcom","MPageController","MURI","URI","FWLoader"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=b('FWLoader').FW,q={LINK_SIGIL:'gps-link',FORM_SIGIL:'gps-form',UPDATE_LOCATION_INTERVAL:60000,desiredProperties:['latitude','longitude','accuracy','altitude','altitudeAccuracy','heading','speed'],locationOptions:{enableHighAccuracy:true,timeout:60000,maximumAge:300000},watchID:null,pendingHref:'',pendingForm:null,_JSONLocation:'',_currentSearchMode:null,_lastUpdateTime:0,enableFWGeolocation:true,locationSearchModes:{SEARCH_MODE:'m',MODE_COMPOSER:'cp',MODE_CHECKIN:'ci'},setCurrentJSONLocation:function(r){q._JSONLocation=r;},getCurrentJSONLocation:function(){return q._JSONLocation;},setLocationSearchMode:function(r){q._currentSearchMode=r;},getLocationSearchMode:function(){return q._currentSearchMode;},shouldUseFWGeolocation:function(){return window.FW_ENABLED&&p.isIOS()&&q.enableFWGeolocation;},updateLocation:function(r){if(r){if(q.shouldUseFWGeolocation())r={coords:r};var s={},t;for(var u=0;u<q.desiredProperties.length;u++){t=q.desiredProperties[u];if(r.coords[t])s[t]=r.coords[t];}if(r.timestamp)s.timestamp=r.timestamp/1000;q._JSONLocation=JSON.stringify(s);q.sendCurrentLocationToServer();if(q.pendingForm){q.submitForm(q.pendingForm);}else if(q.pendingHref)q.gotoPage(q.pendingHref);q.pendingForm=null;q.pendingHref='';l.invoke('location-update',null,{position:r});}},handleError:function(r){q.clearWatch();l.invoke('location-error',null,{error:r});if(q.pendingForm){q.submitForm(q.pendingForm);q.pendingForm=null;}else if(q.pendingHref){q.gotoPage(q.pendingHref);q.pendingHref='';}},sendCurrentLocationToServer:function(){var r=Date.now();if(r-q._lastUpdateTime>q.UPDATE_LOCATION_INTERVAL){q._lastUpdateTime=r;var s=new k(new n('/places/update_location.php').setAsync(true).toString());s.addData({json_location:q._JSONLocation});s.send();}},gotoPage:function(r){var s=new o(r);s.addQueryData('json_location',q._JSONLocation);m.load(s);},submitForm:function(r){r.appendChild(h.create('input',{name:'json_location',type:'hidden',value:q._JSONLocation}));if(!r.onsubmit||r.onsubmit())r.submit();},clearWatch:function(){if(!q.watchID)return;if(q.shouldUseFWGeolocation()){p.geolocation.clearWatch();}else navigator.geolocation.clearWatch(q.watchID);q.watchID=null;},watchPosition:function(){if(q.shouldUseFWGeolocation()){q.watchID=1;p.geolocation.watchPosition(q.updateLocation,q.handleError);p.geolocation.getCurrentPosition(q.updateLocation);}else{var r=setTimeout(q.handleError,q.locationOptions.timeout);q.watchID=navigator.geolocation.watchPosition(function(s){clearTimeout(r);q.updateLocation(s);},function(s){clearTimeout(r);q.handleError(s);},q.locationOptions);}},monitorLocation:function(){q.clearWatch();q.watchPosition();k.listen('postprocess',function(){if(!document.getElementById('place_update')&&q.watchID)q.clearWatch();});},submitFormWithLocation:function(r){if(typeof r=='string')r=g(r);var s=q;j.show();if(s.watchID&&s._JSONLocation){s.submitForm(r);return;}s.pendingHref='';s.pendingForm=r;s.monitorLocation();return false;},gotoPageWithLocation:function(r){var s=q;j.show();if(s.watchID&&s._JSONLocation){s.gotoPage(r);return;}s.pendingForm=null;s.pendingHref=r;s.monitorLocation();return false;},onClick:function(event){event.kill();var r=i.get(event.getNode(q.LINK_SIGIL));q.gotoPageWithLocation(r.href);},onSubmit:function(event){event.kill();var r=h.find(event.getNode(q.FORM_SIGIL),'form');q.submitFormWithLocation(r);}};e.exports=q;},null);
__d("MSideNavMarauderLogger",["DataStore","Stratcom","MarauderLogger","MTouchClick"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='';function l(event){i.toggleModule('sidebar_menu',true);}function m(event){i.toggleModule('sidebar_menu',false);}function n(event){var w=event.getNode('tag:a'),x=event.getNode('tag:div');i.log('open_application','sidebar_menu',{application_link_type:'local_module',display_name:x?x.innerText:'unknown',url:w&&w.href});i.setNavigationModule('sidebar_menu');}function o(){t('session_start');}function p(){t('cancel');}function q(w){var x=w.getData();if(x.node.rel<=0)return;var y=0,z='',aa=g.get(x.node);if(aa){y=aa.bootstrap?1:0;z=aa.type;}var ba=0,ca=null;for(var da=0;da<x.results.length;da++){var ea=x.results[da];if(ea.rel>0){if(ea.rel==x.node.rel){ca=ba;break;}ba++;}}t('click',{query:x.query,is_bootstrapped:y,display_position:ca},z,x.node.rel);}function r(w){var x=w.getData();t('click',{query:x.query,is_bootstrapped:x.node.bootstrap?1:0,display_position:x.position},x.node.type,x.node.id);}function s(w){if(k!==w)t('search_keystroke',{prev_query:k,new_query:w});k=w;}function t(w,x,y,z){i.log(w,'search_typeahead',x,y,z);}function u(w){w.listen('change',s);}h.listen('m:side-area:show',null,l);h.listen('m:side-area:hide',null,m);h.listen('click','side-menu-item',n);var v=j.hasTouchEvents()?'touchend':'click';h.listen(v,'search-activator',o);h.listen(v,'graph-search-activator',o);h.listen('click','graph-search-entry-point',o);h.listen('m:search-overlay:cancel',null,p);h.listen('m:search-overlay:cancel-react',null,p);h.listen('m:search-typeahead:select',null,q);h.listen('m:search-typeahead:select-react',null,r);e.exports={setupTypeaheadListener:u};},null);
__d("MSearchConst",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={refid:46,feed_search:'feed',news_search:'news',video_search:'video',content_search:'content',msite_news_null_state:'mnns',msite_news_non_gs_null_state:'mnngns',event_click:'click',event_impression:'imp'};},null);
__d("XMobileSearchTrendingLoggingController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/graphsearch\/trending\/logging\/",{topic_ids:{type:"IntVector",required:true},source:{type:"String",required:true},positions:{type:"IntVector",required:true},query_id:{type:"Int",required:true},event:{type:"String",required:true}});},null);
__d("MSearchTrendingLogger",["XMobileSearchTrendingLoggingController","MRequest","MSearchConst","Stratcom"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=null,l={registerTrendingTopicListeners:function(m,n,o,p){if(!k)k={};for(var q=0;q<m.length;q++){var r=m[q];if(r==null||k[r])continue;k[r]=j.listen('click',r,this._logTrendingTopicClick(r,n,o[q],p));}},logTrendingTopicImpressions:function(m,n,o,p){if(!m||m.length===0)return;for(var q=0;q<m.length;q++)if(m[q]==null){m.splice(q,1);o.splice(q,1);q--;}var r=g.getURIBuilder().setIntVector('topic_ids',m).setString('source',n).setIntVector('positions',o).setInt('query_id',p).setString('event',i.event_impression).getURI(),s=new h(r);s.send();},_logTrendingTopicClick:function(m,n,o,p){if(!m)return;return function(){var q=g.getURIBuilder().setIntVector('topic_ids',[m]).setString('source',n).setIntVector('positions',[o]).setInt('query_id',p).setString('event',i.event_click).getURI(),r=new h(q);r.send();};}};e.exports=l;},null);
__d("MSearchTypeaheadPerfLogger",["BanzaiScuba","CurrentUser","performanceNow"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();function j(k,l,m){"use strict";this._searchType=l.type;this._sampleRate=l.sample_rate;this._siteType=l.site;this._cacheEnable=m?1:0;this.init(k);this.initEvents();this._reset();}j.prototype.init=function(k){"use strict";this._data=k.getDatasource();this._typeahead=k;if(this._typeahead.props&&this._typeahead.props.vertical)this._vertical=this._typeahead.props.vertical;};j.prototype.initEvents=function(){"use strict";this._data.listen('initial_render',this.initialRender.bind(this));this._data.listen('after_complete',this.complete.bind(this));this._data.listen('req_dispatch',this.remoteRequestDispatch.bind(this));this._data.listen('req_sent',this.remoteRequestSent.bind(this));this._data.listen('req_recv',this.remoteRequestReceived.bind(this));this._typeahead.listen('update',this.queryStart.bind(this));this._typeahead.listen('render_start',this.renderStart.bind(this));this._typeahead.listen('rendered',this.rendered.bind(this));};j.prototype._reset=function(){"use strict";this._startTime=null;this._intialRenderTime=null;this._remoteRequestDispatchTime=null;this._remoteRequestSentTime=null;this._remoteRequestReceivedTime=null;this._renderStart=null;this._rendered=null;this._endTime=null;this._cacheOnly=1;this._resultLength=0;this._originQuery=null;this._query=null;};j.prototype.initialRender=function(){"use strict";this._intialRenderTime=Date.now();};j.prototype.complete=function(){"use strict";this._endTime=Date.now();this._query=this._typeahead.getValue();this.logToScuba();this._reset();};j.prototype.queryStart=function(k){"use strict";this._reset();this._originQuery=k;this._startTime=Date.now();};j.prototype.renderStart=function(){"use strict";this._renderStart=i();};j.prototype.rendered=function(){"use strict";this._rendered=i()-this._renderStart;};j.prototype.remoteRequestDispatch=function(k){"use strict";this._remoteRequestDispatchTime=Date.now();this._sid=k;};j.prototype.remoteRequestSent=function(){"use strict";this._remoteRequestSentTime=Date.now();};j.prototype.remoteRequestReceived=function(k){"use strict";this._remoteRequestReceivedTime=Date.now();this._resultLength=k;this._cacheOnly=0;};j.prototype.logToScuba=function(){"use strict";if(this._startTime===null)return;if(this._originQuery!==this._query)return;var k=new g('mobile_search_facebar_js',null,{addBrowserFields:true,addPredictedGeographyFields:true,addUser:true,addSearchVersion:true,addGatekeepers:{mtouchGKs:true}});k.addInteger('sample_rate',this._sampleRate);k.addNormal('typeahead_type',this._searchType);k.addNormal('site',this._siteType);if(this._vertical){k.addNormal('vertical',this._vertical);k.addNormal('search_mode',this._typeahead.state.searchMode);}k.addNormal('session_id',this._sid);k.addNormal('user_id',h.getID());k.addNormal('query',this._query);k.addInteger('cache_keypress_render',Math.max(this._intialRenderTime-this._startTime,0));if(this._rendered)k.addInteger('rendered',this._rendered);if(this._cacheOnly===0){k.addInteger('remote_keypress_query_dispatch',Math.max(this._remoteRequestDispatchTime-this._startTime,0));k.addInteger('remote_keypress_query_start',Math.max(this._remoteRequestSentTime-this._startTime,0));k.addInteger('remote_keypress_query_end',Math.max(this._remoteRequestReceivedTime-this._startTime,0));k.addInteger('remote_keypress_render',Math.max(this._endTime-this._startTime,0));k.addInteger('remote_render',Math.max(this._endTime-this._remoteRequestReceivedTime,0));k.addInteger('time_js_async',Math.max(this._remoteRequestReceivedTime-this._remoteRequestSentTime,0));}k.addInteger('end_to_end',Math.max(this._endTime-this._startTime,0));k.addInteger('num_result',this._resultLength);k.addNormal('is_cache_only',this._cacheOnly);k.addNormal('is_cache_enable',this._cacheEnable);k.post();};e.exports=j;},null);
__d("MPopoverClose",["Popover"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h=function(){if(g._activePopover)g._activePopover.close();};f.main=h;},null);
__d("MRecentSearchesUpdater",["Stratcom"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h='search-recent-queries';function i(j){"use strict";j.listen('change',this.changeQuery.bind(this));j.listen('select',this.addRecentSearchWithSelection.bind(this));j.listen('show',this.changeResults.bind(this));j.listen('query',this.addRecentSearchWithQuery.bind(this));j.listen('refreshRecent',this.refreshRecent.bind(this));}i.prototype.refreshRecent=function(){"use strict";g.invoke('refreshRecent',h,{});};i.prototype.changeQuery=function(j){"use strict";this.currentQuery=j;};i.prototype.changeResults=function(j){"use strict";if(j.show){this.results=j.show.slice();}else this.results=j.slice();};i.prototype.addRecentSearchWithQuery=function(){"use strict";g.invoke('addRecentQuery',h,{query:this.currentQuery});};i.prototype.addRecentSearchWithSelection=function(j){"use strict";var k=j&&(j.rel||j.getAttribute('rel'));if(!k){this.addRecentSearchWithQuery();return;}for(var l=0;l<this.results.length;l++)if(this.results[l].id===k)g.invoke('addRecentSearch',h,{result:this.results[l]});};e.exports=i;},null);
__d("MSearchTypeaheadLogger",["setTimeoutAcrossTransitions","DataStore","DOM","MTouchClick","MRequest","Stratcom"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();var m=1000;function n(o,p){"use strict";this.typeahead=o;this.uri=p;this.initialize();this.emptyQueryResults=[];o.listen('focus',function(){this.startSession(this.typeahead.getValue(),{force:true});}.bind(this));o.listen('change',function(r){this.startSession(r);if(this.sessionInProgress())this.data.query=r;}.bind(this));o.listen('keypress',function(r){this.keypressed+=1;}.bind(this));o.listen('select',function(r){var s=r&&(r.rel||r.getAttribute('rel'));this.data.click_event=Date.now();if(s){this.data.selected_id=s;}else this.data.selected_search=1;if(this.results&&this.results.length&&this.data.query&&this.data.query.length)l.invoke('m:search-typeahead:select',null,{node:r,results:this.results.slice(),query:this.data.query.slice()});this.logToServer();}.bind(this));o.listen('show',function(r){this.startSession(this.typeahead.getValue());if(this.sessionInProgress())if(r.show){this.results=r.show.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.results;}else{this.data.candidate_results=r.slice();if(!this.typeahead.getValue())this.emptyQueryResults=this.data.candidate_results;}}.bind(this));o.listen('query',function(r,s){this.data.selected_search=1;this.data.selected_type=s;this.logToServer();}.bind(this));var q=j.hasTouchEvents()?'touchend':'click';l.listen(q,'search-activator',function(){this.startSession('',{force:true});}.bind(this));l.listen(q,'graph-search-activator',function(){this.startSession('',{force:true});}.bind(this));o.listen('scroll',function(event){this.data.scrolled=1;}.bind(this));}n.prototype.blur=function(o){"use strict";this.blurInProgress=true;g(function(){this.data.abandonment_reason=o;this.logToServer();}.bind(this),m);};n.prototype.startSession=function(o,p){"use strict";p=p||{};if(this.sessionID==null&&(o||p.force)){this.data={};this.keypressed=0;this.sessionID=Math.random().toString();this.data.query=o;this.data.session_start=Date.now();l.invoke('m-typeahead-logger:new-session-id',null,{sessionID:this.sessionID});}};n.prototype.sessionInProgress=function(){"use strict";if(this.sessionID!==null&&!this.blurInProgress)return true;return false;};n.prototype.logToServer=function(){"use strict";if(this.sessionID){this.data.sid=this.sessionID;this.data.count_keys_pressed=this.keypressed;this.data.typeahead_type=this.typeahead.getTypeaheadType&&this.typeahead.getTypeaheadType();this.data.candidate_results=this.data.candidate_results||[];if(this.data.candidate_results.length===0)for(var o=0;o<this.results.length;o++){var p=this.results[o];if(p.rel>0){var q={id:p.rel};q.type=p.type;q.renderType=p.renderType;try{var s=i.find(p,'a','typeahead-result');if(h.get(s).bootstrap)q.bootstrap=1;}catch(r){}this.data.candidate_results.push(q);}}if(!this.data.query&&(!this.data.candidate_results||this.data.candidate_results.length===0))this.data.candidate_results=this.emptyQueryResults;var t=new k(this.uri);t.setMethod('POST').setData({stats:JSON.stringify(this.data)}).send();}this.initialize();};n.prototype.initialize=function(){"use strict";this.data={};this.sessionID=null;this.keypressed=0;this.results=[];this.blurInProgress=false;};Object.assign(n.prototype,{typeahead:null,data:null,sessionID:null,results:null,uri:null,blurInProgress:null});e.exports=n;},null);
__d("XLiveController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/live\/{?query}\/",{date:{type:"Int"},ref:{type:"String"},source:{type:"String"},region_id:{type:"Int"},query:{type:"String"},name:{type:"String"},cursor:{type:"String"}});},null);
__d("MTypeaheadNullstateSource",["URI","Stratcom","MTypeaheadTouchSource","XLiveController"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k='graph-search-entry-point',l='search-recent-queries';for(var m in i)if(i.hasOwnProperty(m))o[m]=i[m];var n=i===null?null:i.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=i;function o(p,q){"use strict";i.call(this,p,q);h.listen('setCurrentProfileID',k,function(event){if(event.getData().profileID!==this.profileID){this.profileID=event.getData().profileID;this.refresh();}}.bind(this));h.listen('addRecentSearch',l,function(event){var r=event.getData().result;if(r)this.addRecentResult(r);}.bind(this));h.listen('addRecentQuery',l,function(event){var r=event.getData().query;if(r){var s=this.makeRecentResultWithQuery(r);this.addRecentResult(s);}}.bind(this));h.listen('refreshRecent',l,function(){this.refresh();}.bind(this));h.listen('searchRefreshNullstate',null,function(){return this.refresh();}.bind(this));}o.prototype.makeRecentResultWithQuery=function(p){"use strict";return {display:p,name:p,id:p,uri:'/search/?query='+p};};o.prototype.addRecentResult=function(p){"use strict";if(p.isTrending)return;p.isRecentSearch=true;var q={},r=0;p.idx=r;q[p.id]=p;for(var s in this._raw)if(s!=p.id){r++;this._raw[s].idx=r;q[s]=this._raw[s];}this._raw=q;};o.prototype.refresh=function(){"use strict";this._raw={};this.sendRequest();};o.prototype.getAuxiliaryData=function(){"use strict";return {profile_id:(this.profileID?this.profileID:(this.groupID?this.groupID:null)),disable_single_state:this.singleStateDisabled?true:false,enable_scoped:this.scopedEnabled?true:false};};o.prototype.ondata=function(p){"use strict";n.ondata.call(this,p.nullstate);};o.prototype.matchResults=function(p){"use strict";var q=[];if(p==='')q=Object.keys(this._raw);this.sortHits(p,q);var r=this.renderNodes(p,q);this.invoke('resultsready',r);this.invoke('complete');};o.prototype.setCurrentProfileID=function(p){"use strict";this.profileID=p;};o.prototype.setForceDisableSingleState=function(p){"use strict";this.singleStateDisabled=p;};o.prototype.setEnableScoped=function(p){"use strict";this.scopedEnabled=p;};o.prototype.sortHits=function(p,q){"use strict";q.sort(this.sortingFunction.bind(this));};o.prototype.sortingFunction=function(p,q){"use strict";var r=this._raw[p],s=isNaN(r.idx)?Number.MAX_VALUE:r.idx,t=this._raw[q],u=isNaN(t.idx)?Number.MAX_VALUE:t.idx;return s-u;};o.prototype.getTransformer=function(){"use strict";return function(p){if(p.type==='trending'){var q=new g('/topic/'+p.id);if(p.isSport)q=j.getURIBuilder().setString('query',String(p.id)).getURI();return {id:p.name,display:p.name,name:p.name,uri:q.toString(),topicID:p.id,trendingQueryID:p.trendingQueryID,subtext:p.articleTitle,type:p.type,photo:p.articleImageURI,actionTime:0,isTrending:true,isNullStateSuggestion:true};}if(p.type==='keyword'||p.type==='grammar'){q=new g(p.path||p.uri);return {cost:p.cost,idx:p.idx,display:p.text,name:p.text,type:'keyword',id:p.uid,uri:q.toString(),actionTime:p.action_time,isPYMK:p.pymk,isRecentSearch:p.recent_search,subtext:p.subtext,logInfo:p.logInfo,isNullStateSuggestion:true,isScoped:p.is_scoped};}return {actionTime:p.action_time,name:p.text,uri:p.path||p.uri,id:p.uid||p.id,display:p.name||p.text,photo:p.photo,category:p.category,cost:p.cost,idx:p.idx,tokens:p.tokens,type:p.type[0].toUpperCase()+p.type.slice(1),verticalType:p.vertical_type,subtext:p.subtext,isPYMK:p.pymk,isRecentSearch:p.recent_search,logInfo:p.logInfo,isNullStateSuggestion:true,isScoped:p.is_scoped};};};e.exports=o;},null);